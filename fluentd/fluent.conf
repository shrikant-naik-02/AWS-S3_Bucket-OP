<source>
  @type tail
  path /app/logs/spring-boot-app.log
  pos_file /fluentd/log/spring-boot-app.pos
  tag springboot.app

  <parse>
    @type multiline
    format_firstline /^\{/
    format1 /^(?<json>.+)$/
    # Use json parser for the whole combined multiline
  </parse>
</source>

<filter springboot.app>
  @type parser
  key_name json
  format json
  time_key timestamp
  time_format %Y-%m-%dT%H:%M:%S%z
</filter>

<match springboot.app>
  @type stdout
</match>
